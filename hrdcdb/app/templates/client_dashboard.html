{% extends "base.html" %}

{% block content %}
    <div class="dashboard_Fields">
        <div class="formElement">
            <a href="{{ url_for('universal_form', clientid = client.id)}}" class="dash_button">Print Universal Form</a>
        </div>
        <div class="formElement">
            <h2>Client Demographics</h2>
            <table class="clientView">
                <tr>
                    <td>Client Name</td> 
                    {% if client.middle_name != None %}
                    <td>{{ client.first_name }} {{ client.middle_name }} {{ client.last_name }}</td>
                    {% else %}
                    <td>{{ client.first_name }} {{ client.last_name }}</td>
                    {% endif %}
                </tr>
                <tr>
                    <td>Date of Birth</td>
                    <td>{{ client.dob.strftime('%m-%d-%Y') }}</td>
                </tr>
                <tr>
                    <td>Gender</td>
                    <td>{{ client.gen.gender }}</td>
                </tr>
            </table>
        <a href="{{ url_for('edit_client', clientid = client.id)}}" class="dash_button">Edit Client Demographics</a>
        </div>
        <div class="formElement">
            <h2>Address</h2>
            {% if address %}
            <table class="clientView">
                <tr>
                    <td> Address </td>
                    <td>{{ address.address }}</td>
                </tr>
                <tr>
                    <td> </td>
                    <td>{{ address.address_2 }}</td>
                </tr>
                <tr>
                    <td> City </td>
                    <td>{{ address.city }}</td>
                </tr>
                <tr>
                    <td> State </td>
                    <td>{{ address.state }}</td>
                </tr>
            </table>
            {% endif %}
            <a href="{{ url_for('add_address', clientid = client.id)}}" class="dash_button">Add Address</a>
        </div>
        
        <div class="formElement">
            <h2>Contact Information</h2>
            {% if contact_info %}
            <table class="clientView">
                <tr>
                    <th>Contact</th>
                    <th>Type</th>
                </tr>
                {% for c in contact_info %}
                <tr>
                    <td>{{ c.contact }}</td>
                    <td>{{ c.ContactType.contact_type }}</td>
                </tr>
                {% endfor%}
            </table>
            {% endif %}
            <a href="{{ url_for('create_contact', clientid = client.id)}}" class="dash_button">Edit Contact Information</a>
        </div>
        {% if relations %}
        <div class="formElement">
            <h2>Relationships</h2>
            <table class="clientView">
                <tr>
                    <th>Client A</th>
                    <th>Client B</th>
                    <th>Relationship</th>
                </tr>
                {% for r in relations %}
                <tr>
                    <td>{{ r.client_a.first_name }} {{ r.client_a.last_name }}</td>
                    <td>{{ r.client_b.first_name }} {{ r.client_b.last_name }}</td>
                    <td>{{ r.relationship.relationship }}</td>
                </tr>
                {% endfor%}
            </table>
            <a href="{{ url_for('create_relationship', clientid = client.id)}}" class="dash_button">Add Relationship</a>
        </div>
        {% endif %}
        {% if families %}
        <div class="formElement">       
            <h2>Family Information</h2>
            <table class="clientView">
                <tr>
                    <th>Family ID</th>
                    <th>Created By (Program)</th>
                    <th>Created By (User)</th>
                    <th>Created Date</th>
                    <th> </th>
                </tr>
                {% for f in families %}
                <tr>
                    <td>{{ f.id}}</td>
                    <td>{{ f.program.name}}</td>
                    <td>{{ f.user.username }}</td>
                    <td>{{ f.created_date.strftime('%m-%d-%Y') }}</td>
                    <td><a href="{{ url_for('family_dashboard', familyid = f.id) }}">Dashboard</a></td>
                </tr>
                {% endfor%}
            </table>
            <a href="{{ url_for('create_family', clientid = client.id)}}" class="dash_button">Create Family</a>
        </div>  
        {% endif %}
        <div class="formElement">
            <h2>Services</h2>
            {% if services %}
            <table class="clientView">
                <tr>
                    <th>Program</th>
                    <th>Service</th>
                    <th>Date</th>
                </tr>
                {% for s in services %}
                <tr>
                    <td>{{ s.program.name }}</td>
                    <td>{{ s.service_type.name }}</td>
                    <td>{{ s.begin_date.strftime('%m-%d-%Y') }}</td>
                </tr>
                {% endfor%}
            </table>
            {% endif %}
            <a href="{{ url_for('add_service', clientid = client.id)}}" class="dash_button">Add new service</a>
        </div>
        <div class="formElement">
            <h2>Assessments</h2>
            {% if assessments %}
            <table class="clientView">
                <tr>
                    <th>Program</th>
                    <th>Assessment Type</th>
                    <th>Date</th>
                </tr>
                {% for a in assessments %}
                <tr>
                    <td>{{ a.program.name }}</td>
                    <td>{{ a.assess_type.assess_type }}</td>
                    <td>{{ a.assessment_date.strftime('%m-%d-%Y') }}</td>
                </tr>
                {% endfor%}
            </table>
            {% endif %}
            <a href="{{ url_for('add_assessment', clientid = client.id)}}" class="dash_button">Add new assessment</a>
        </div>
    </div>
{% endblock %}